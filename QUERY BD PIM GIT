/*
-------------------------------------------------SIGEFROTAS---------------------------------------------------

QUERY PARA CRIACAO DO BANCO DE DADOS DO SISTEMA SIGEFROTAS
--------------------------------------------------------------------------------------------------------------

NO WINDOWS SELECIONE TODA A QUERY E EXECUTE COM      CTRL+SHIF+ENTER

NO MAC SELECIONE TODA A QUERY E EXECUTE COM   COMAND + SHIFT + RETURN

--------------------------------------------------------------------------------------------------------------
*/

CREATE DATABASE GER_FROTAS;


USE GER_FROTAS;

SET FOREIGN_KEY_CHECKS = 0;


CREATE TABLE MOTORISTA
( CD_MOTORISTA INT NOT NULL AUTO_INCREMENT,
NM_MOTORISTA VARCHAR (80) NOT NULL,
TEL_MOTORISTA VARCHAR (14),
CPF_MOTORISTA VARCHAR(14) NOT NULL,
RG_MOTORISTA CHAR(12) NOT NULL,
DT_NASC_MOTORISTA DATE,
SX_MOTORISTA VARCHAR (9),
CNH_MOTORISTA VARCHAR (12) NOT NULL,
VAL_CNH_MOTORISTA DATE NOT NULL,
OBS_MOTORISTA varchar(120),
PRIMARY KEY (CD_MOTORISTA));



CREATE TABLE `VEICULO` (
  `CD_VEICULO` int(11) NOT NULL AUTO_INCREMENT,
  `MARCA_VEICULO` varchar(15) DEFAULT NULL,
  `MODELO_VEICULO` varchar(45) DEFAULT NULL,
  `COR_VEICULO` varchar(20) DEFAULT NULL,
  `PLACA_VEICULO` varchar(8) DEFAULT NULL,
  `HODOM_VEICULO` decimal(8,0) DEFAULT NULL,
  `ANO_VEICULO` int(4) DEFAULT NULL,
  `ANO_MOD_VEICULO` int(4) DEFAULT NULL,
  `TIPO_VEICULO` varchar(20) DEFAULT NULL,
  `DISPO_VEICULO` varchar(40) DEFAULT NULL,
  `SEGURO_VEICULO` varchar(40) DEFAULT NULL,
  `NUM_APOLICE_VEICULO` varchar(15) DEFAULT NULL,
  `OBS_VEICULO` varchar(120) DEFAULT NULL,
  PRIMARY KEY (`CD_VEICULO`)
);


CREATE TABLE PECAS
( CD_PECA int NOT NULL AUTO_INCREMENT,
  NOME_PECA varchar (40),
  QTD_PECA int,
  VALOR_PECA NUMERIC (7,2),
  CD_FORNEC_PECA INT NOT NULL,
PRIMARY KEY (CD_PECA),
CONSTRAINT FORNEC_PECA FOREIGN KEY (CD_FORNEC_PECA) REFERENCES FORNECEDOR (CD_FORNEC));



CREATE TABLE GER_FROTA_VIAGEM
( CD_VIAGEM int NOT NULL AUTO_INCREMENT,
ORIGEM_VIAGEM varchar (150),
EST_ORIGEM_VIAGEM varchar (50),
DEST_VIAGEM varchar (150),
EST_DEST_VIAGEM varchar (50),
KM_VIAGEM NUMERIC (5),
TIPO_VIAGEM varchar (50),
MOTIVO_VIAGEM varchar (20),
VALOR_VIAGEM NUMERIC (7,2),
OBS_VIAGEM varchar (120),
CD_MOTORISTA_VIAGEM INT NOT NULL,
CD_VEICULO_VIAGEM INT NOT NULL,
PRIMARY KEY (CD_VIAGEM),
CONSTRAINT MOTORISTA_VIAGEM FOREIGN KEY (CD_MOTORISTA_VIAGEM) REFERENCES MOTORISTA (CD_MOTORISTA),
CONSTRAINT VEICULO_VIAGEM FOREIGN KEY (CD_VEICULO_VIAGEM) REFERENCES VEICULO (CD_VEICULO));


CREATE TABLE ALUG_VEIC_VIAGEM
( CD_VIAGEM int NOT NULL AUTO_INCREMENT,
ORIGEM_VIAGEM varchar (150),
EST_ORIGEM_VIAGEM varchar (50),
DEST_VIAGEM varchar (150),
EST_DEST_VIAGEM varchar (50),
KM_VIAGEM NUMERIC (5),
TIPO_VIAGEM varchar (50),
MOTIVO_VIAGEM varchar (20),
VALOR_VIAGEM NUMERIC (7,2),
OBS_VIAGEM varchar (120),
CD_MOTORISTA_VIAGEM INT NOT NULL,
CD_VEICULO_VIAGEM INT NOT NULL,
PRIMARY KEY (CD_VIAGEM),
CONSTRAINT MOTORISTA_VIAGEM_ALUG FOREIGN KEY (CD_MOTORISTA_VIAGEM) REFERENCES MOTORISTA (CD_MOTORISTA),
CONSTRAINT VEICULO_VIAGEM_ALUG FOREIGN KEY (CD_VEICULO_VIAGEM) REFERENCES VEICULO (CD_VEICULO));



CREATE TABLE COMPRAS
( CD_COMPRA INT NOT NULL AUTO_INCREMENT,
DT_COMPRA DATE,
NF_COMPRA NUMERIC (30),
CHAVE_ACESSO_COMPRA VARCHAR (120),
VALOR_COMPRA NUMERIC (7,2),
CD_PECA_COMPRA INT NOT NULL,
PRIMARY KEY (CD_COMPRA),
CONSTRAINT COMPRA FOREIGN KEY (CD_PECA_COMPRA) REFERENCES PECAS (CD_PECA));


create table CONTAS_PAGAR
(CD_CONTA INT NOT NULL AUTO_INCREMENT,
TOTAL_CONTA FLOAT,
TOTAL_PAGO FLOAT,
STATUS_CONTA VARCHAR(30) NOT NULL,
DT_PAGTO DATE,
CATEGORIA VARCHAR(50) NOT NULL,
CD_VEIC_CONTA INT,
OBS_CONTA VARCHAR(200),
PRIMARY KEY (CD_CONTA),
CONSTRAINT DEBITO FOREIGN KEY (CD_VEIC_CONTA) REFERENCES VEICULO(CD_VEICULO));

create table CONTAS_RECEBER
(CD_CONTA INT NOT NULL AUTO_INCREMENT,
TOTAL_CONTA FLOAT,
TOTAL_PAGO FLOAT,
STATUS_CONTA VARCHAR(30) NOT NULL,
DT_PAGTO DATE,
CATEGORIA VARCHAR(50) NOT NULL,
CD_VEIC_CONTA INT,
OBS_CONTA VARCHAR(200),
PRIMARY KEY (CD_CONTA),
CONSTRAINT CREDITO FOREIGN KEY (CD_VEIC_CONTA) REFERENCES VEICULO(CD_VEICULO));

CREATE TABLE `LOGIN` (
  `ID_LOGIN` int(11) NOT NULL AUTO_INCREMENT,
  `LOGIN_USER` varchar(60) NOT NULL,
  `PW_USER` varchar(60) NOT NULL,
  `EMAIL_USER` varchar(95) NOT NULL,
  `DT_NASC_USER` date NOT NULL,
  PRIMARY KEY (`ID_LOGIN`));


SET FOREIGN_KEY_CHECKS = 1;

